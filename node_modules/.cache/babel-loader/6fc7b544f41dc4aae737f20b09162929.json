{"ast":null,"code":"import _classCallCheck from \"/Users/apple/Downloads/mikroapp-5db12a611b6a06574105a6f51ca416bfcf496a47/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/apple/Downloads/mikroapp-5db12a611b6a06574105a6f51ca416bfcf496a47/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/apple/Downloads/mikroapp-5db12a611b6a06574105a6f51ca416bfcf496a47/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/apple/Downloads/mikroapp-5db12a611b6a06574105a6f51ca416bfcf496a47/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/apple/Downloads/mikroapp-5db12a611b6a06574105a6f51ca416bfcf496a47/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/apple/Downloads/mikroapp-5db12a611b6a06574105a6f51ca416bfcf496a47/src/components/Wallet/SideBar/index.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport { connect } from 'react-redux';\nimport { host } from '../../../config';\nimport actions from '../../../actions/index';\nimport compose from \"recompose/compose\";\nimport { withStyles } from \"@material-ui/core\";\nimport List from \"@material-ui/core/List/List\";\nimport ListItem from \"@material-ui/core/ListItem/ListItem\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar/Avatar\";\nimport { currencyData } from \"../../../utils/index\";\nimport ListItemText from \"@material-ui/core/ListItemText/ListItemText\";\nimport Typography from \"@material-ui/core/Typography/Typography\";\nimport Hidden from \"@material-ui/core/Hidden/Hidden\";\nimport Drawer from \"@material-ui/core/Drawer/Drawer\";\nimport styles from './styles';\n\nvar SideBar =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SideBar, _Component);\n\n  function SideBar() {\n    _classCallCheck(this, SideBar);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SideBar).apply(this, arguments));\n  }\n\n  _createClass(SideBar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this = this;\n\n      // TODO: Move all fetch requests to redux-saga\n      fetch(\"\".concat(host, \"/api/v2/peatio/account/balances\"), {\n        credentials: 'same-origin',\n        headers: {\n          Accept: 'application/json'\n        }\n      }).then(function (res) {\n        if (res.ok) {\n          return res.json();\n        }\n\n        throw new Error('Unauthorized!');\n      }).then(function (data) {\n        _this.props.actions.setBalances(data);\n      });\n      fetch(\"\".concat(host, \"/api/v2/peatio/account/deposits\"), {\n        credentials: 'same-origin',\n        headers: {\n          Accept: 'application/json'\n        }\n      }).then(function (res) {\n        if (res.ok) {\n          return res.json();\n        }\n\n        throw new Error('Unauthorized!');\n      }).then(function (data) {\n        _this.props.actions.setDepositsHistory(data);\n      });\n      fetch(\"\".concat(host, \"/api/v2/peatio/account/withdraws\"), {\n        credentials: 'same-origin',\n        headers: {\n          Accept: 'application/json'\n        }\n      }).then(function (res) {\n        if (res.ok) {\n          return res.json();\n        }\n\n        throw new Error('Unauthorized!');\n      }).then(function (data) {\n        _this.props.actions.setWithdrawsHistory(data);\n      });\n    }\n  }, {\n    key: \"fetchWalletAdress\",\n    value: function fetchWalletAdress(currency) {\n      var _this2 = this;\n\n      fetch(\"\".concat(host, \"/api/v2/peatio/account/deposit_address/\").concat(currency)).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        _this2.props.actions.setWalletAddress(data);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          balances = _this$props.balances,\n          walletAddresses = _this$props.walletAddresses,\n          activeBalance = _this$props.activeBalance,\n          actions = _this$props.actions;\n      if (balances.length === 0) return null;\n      var drawerContent = React.createElement(List, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, balances.map(function (_ref) {\n        var currency = _ref.currency,\n            balance = _ref.balance;\n        return React.createElement(ListItem, {\n          button: true,\n          key: currency,\n          alignItems: \"flex-start\",\n          onClick: function onClick() {\n            actions.setActiveBalance(currency);\n\n            if (activeBalance && walletAddresses[activeBalance] === undefined) {\n              _this3.fetchWalletAdress(activeBalance);\n            }\n          },\n          selected: currency === activeBalance,\n          className: classes.listItem,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, React.createElement(ListItemAvatar, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, React.createElement(Avatar, {\n          alt: currency,\n          src: currencyData[currency] ? currencyData[currency].icon : '',\n          className: currency === activeBalance && classes.selectedIcon,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        })), React.createElement(ListItemText, {\n          primary: currencyData[currency] && currencyData[currency].name || 'no name' // eslint-disable-line\n          ,\n          classes: {\n            primary: currency === activeBalance && classes.selectedText\n          },\n          secondary: React.createElement(React.Fragment, null, React.createElement(Typography, {\n            component: \"span\",\n            className: currency === activeBalance && classes.selectedText,\n            color: \"textPrimary\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 95\n            },\n            __self: this\n          }, \"Balance: \", balance)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }));\n      }));\n      return React.createElement(React.Fragment, null, React.createElement(Hidden, {\n        smUp: true,\n        implementation: \"js\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: '100%',\n          display: activeBalance ? 'none' : 'block'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, drawerContent)), React.createElement(Hidden, {\n        xsDown: true,\n        implementation: \"css\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Drawer, {\n        className: classes.drawer,\n        variant: \"permanent\",\n        anchor: \"left\",\n        classes: {\n          paper: classes.drawerPaper\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes.toolbar,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }), drawerContent)));\n    }\n  }]);\n\n  return SideBar;\n}(Component);\n\nexport default compose(connect(function (state) {\n  return {\n    balances: state.balances.list,\n    activeBalance: state.balances.activeBalance,\n    walletAddresses: state.balances.addresses\n  };\n}, actions), withRouter, withStyles(styles))(SideBar);","map":{"version":3,"sources":["/Users/apple/Downloads/mikroapp-5db12a611b6a06574105a6f51ca416bfcf496a47/src/components/Wallet/SideBar/index.js"],"names":["React","Component","withRouter","connect","host","actions","compose","withStyles","List","ListItem","ListItemAvatar","Avatar","currencyData","ListItemText","Typography","Hidden","Drawer","styles","SideBar","fetch","credentials","headers","Accept","then","res","ok","json","Error","data","props","setBalances","setDepositsHistory","setWithdrawsHistory","currency","setWalletAddress","classes","balances","walletAddresses","activeBalance","length","drawerContent","map","balance","setActiveBalance","undefined","fetchWalletAdress","listItem","icon","selectedIcon","name","primary","selectedText","width","display","drawer","paper","drawerPaper","toolbar","state","list","addresses"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport { connect } from 'react-redux';\nimport { host } from '../../../config';\nimport actions from '../../../actions/index';\nimport compose from \"recompose/compose\";\nimport {withStyles} from \"@material-ui/core\";\nimport List from \"@material-ui/core/List/List\";\nimport ListItem from \"@material-ui/core/ListItem/ListItem\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar/Avatar\";\nimport {currencyData} from \"../../../utils/index\";\nimport ListItemText from \"@material-ui/core/ListItemText/ListItemText\";\nimport Typography from \"@material-ui/core/Typography/Typography\";\nimport Hidden from \"@material-ui/core/Hidden/Hidden\";\nimport Drawer from \"@material-ui/core/Drawer/Drawer\";\nimport styles from './styles';\n\nclass SideBar extends Component {\n  componentDidMount() {\n    // TODO: Move all fetch requests to redux-saga\n    fetch(`${host}/api/v2/peatio/account/balances`, {\n      credentials: 'same-origin',\n      headers: { Accept: 'application/json' },\n    }).then((res) => {\n      if (res.ok) { return res.json(); }\n      throw new Error('Unauthorized!');\n    }).then(data => {\n      this.props.actions.setBalances(data);\n    });\n\n    fetch(`${host}/api/v2/peatio/account/deposits`, {\n      credentials: 'same-origin',\n      headers: { Accept: 'application/json' },\n    }).then((res) => {\n      if (res.ok) { return res.json(); }\n      throw new Error('Unauthorized!');\n    }).then(data => {\n      this.props.actions.setDepositsHistory(data);\n    });\n\n    fetch(`${host}/api/v2/peatio/account/withdraws`, {\n      credentials: 'same-origin',\n      headers: { Accept: 'application/json' },\n    }).then((res) => {\n      if (res.ok) { return res.json(); }\n      throw new Error('Unauthorized!');\n    }).then(data => {\n      this.props.actions.setWithdrawsHistory(data);\n    });\n  }\n\n  fetchWalletAdress(currency) {\n    fetch(`${host}/api/v2/peatio/account/deposit_address/${currency}`)\n      .then(res => res.json())\n      .then(data => {\n        this.props.actions.setWalletAddress(data);\n      });\n  }\n\n  render() {\n    const { classes, balances, walletAddresses, activeBalance, actions } = this.props;\n\n    if (balances.length === 0) return null;\n\n    const drawerContent = (\n      <List>\n        {balances.map(({currency, balance}) => (\n          <ListItem\n            button\n            key={currency}\n            alignItems=\"flex-start\"\n            onClick={() => {\n              actions.setActiveBalance(currency);\n\n              if (activeBalance && walletAddresses[activeBalance] === undefined) {\n                this.fetchWalletAdress(activeBalance);\n              }\n            }}\n            selected={currency === activeBalance}\n            className={classes.listItem}\n          >\n            <ListItemAvatar>\n              <Avatar\n                alt={currency}\n                src={currencyData[currency] ? currencyData[currency].icon : ''}\n                className={currency === activeBalance && classes.selectedIcon}\n              />\n            </ListItemAvatar>\n            <ListItemText\n              primary={currencyData[currency] && currencyData[currency].name || 'no name'} // eslint-disable-line\n              classes={{primary: currency === activeBalance && classes.selectedText}}\n              secondary={\n                <>\n                  <Typography component=\"span\" className={currency === activeBalance && classes.selectedText} color=\"textPrimary\">\n                    Balance: {balance}\n                  </Typography>\n                </>\n              }\n            />\n          </ListItem>\n        ))}\n      </List>\n    );\n\n    return (\n      <>\n        <Hidden smUp implementation=\"js\">\n          <div style={{width: '100%', display: activeBalance ? 'none' : 'block'}}>\n            {drawerContent}\n          </div>\n        </Hidden>\n        <Hidden xsDown implementation=\"css\">\n          <Drawer\n            className={classes.drawer}\n            variant=\"permanent\"\n            anchor=\"left\"\n            classes={{\n              paper: classes.drawerPaper\n            }}\n          >\n            <div className={classes.toolbar} />\n            {drawerContent}\n          </Drawer>\n        </Hidden>\n      </>\n    );\n  }\n}\n\nexport default compose(\n  connect(state => ({\n    balances: state.balances.list,\n    activeBalance: state.balances.activeBalance,\n    walletAddresses: state.balances.addresses,\n  }), actions),\n  withRouter,\n  withStyles(styles)\n)(SideBar);\n"]},"metadata":{},"sourceType":"module"}